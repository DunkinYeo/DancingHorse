<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!--<meta http-equiv="X-UA-Compatible" content="IE=edge" /> -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <title>horse</title>

    <style>
      #wrapper {
        width: 100%;
        height: 100vh;
        position: relative;
      }
      #wrapper:fullscreen {
        background-color: white;
      }

      .horse {
        position: absolute;
      }
      .reverse {
        transform: rotate(0deg);
        -moz-transform: scaleX(-1);
        -o-transform: scaleX(-1);
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
        filter: FlipH;
        -ms-filter: "FlipH";
      }
    </style>

    <script>
      // $( ".horse" ).switchClass( "none", "reverse", 1000, "easeInOutQuad" );
      var option = {
        startWidth: 600,
        endWidth: 600,
        startTop: 20,
        endTop: 20,
        duration: 5000
      }

      var wrapperWidth;
      // var endOfLeft = 
      var animateStart = function () {
		console.log(option);
        $(".horse").addClass('reverse').stop().animate(
          {
            top: option.startTop + "%",
            left: 0,
            width: option.startWidth
          },
          parseInt(option.duration, 10),
          function () {
            $(".horse").removeClass('reverse').stop().animate(
              {
                top: option.endTop + "%",
                left: (wrapperWidth-option.endWidth)+"px",
                width: option.endWidth
              },
              parseInt(option.duration, 10),
              animateStart
            );
          }
        );
      };

      var setOptions = function() {
        option.startWidth = $('.startWidth').val();
        option.endWidth = $('.endWidth').val();
        option.startTop = $('.startTop').val();
        option.endTop = $('.endTop').val();
        option.duration = $('.duration').val();
        console.log(option)
      }

      //---------------------------------------------------------------------
      //Document Ready
      $(document).ready(function() {
        $("#start").click(function() {
          setOptions();
          // $('.horse').clearQueue();
          $(animateStart)
        });

        //--------------------
        //When change a horse
        $("#containerHorses").change(function() {
          //Get a selected horse from dropdown listbox
          var selectedHorse = $("#containerHorses").find(":selected").text();
          $("#imgHorse").attr("src", selectedHorse);
        });
        //--------------------

        //--------------------
        //When change a target
        $("#target").change(function() {
          //Get a selected target from dropdown listbox
          var selectedTarget = $("#target").find(":selected").text();
          $("#generate").html("Generate " + selectedTarget);
          $('#generate').show();
          $('#containerHorses').hide();
        });
        //--------------------

        //-----------------------------------
        //Function for Generate horses button
        $('#generate').click(function() {
          var values = ["objects/blackHorse.gif", "objects/horse-static.jpeg", "objects/whiteHorse.gif", "objects/horse-fb.jpeg", "objects/horse-run.gif", "objects/horse-dog.gif"];

          var currentTarget = $("#target option:selected").val();
          console.log(currentTarget);

          if (currentTarget == "Body") {
            values = ["objects-body/Dance.gif", "objects-body/Olympic.gif"];
          } else if (currentTarget == "Face") {
            values = ["objects-face/face.jpeg", "objects-face/football player.jpeg"];
          } else if (currentTarget == "Dog") {
            values = ["objects-dog/dog-1.gif", "objects-dog/dog-2.gif", "objects-dog/dog-3.gif", "objects-dog/dog-4.gif", "objects-dog/dog-5.gif", "objects-dog/dog-6.gif", "objects-dog/dog-7.gif"];
          } else {
            values = ["objects-horse/blackHorse.gif", "objects-horse/horse-static.jpeg", "objects-horse/whiteHorse.gif", "objects-horse/horse-fb.jpeg", "objects-horse/horse-run.gif", "objects-horse/horse-dog.gif"];
          }

          $('#containerHorses').empty();
          $('#horses').empty();

          $('#containerHorses')
          .append(
              $(document.createElement('label')).prop({
                  for: 'horses'
              }).html('Choose your ' + currentTarget + ': ')
          )
          .append(
              $(document.createElement('select')).prop({
                  id: 'horses',
                  name: 'horses'
              })
          )
          for (const val of values) {
              $('#horses').append($(document.createElement('option')).prop({
                  value: val,
                  text: val
              }))
          }
          //var selectedHorse = $("#containerHorses").find(":selected").text();
          $("#imgHorse").attr("src", $("#containerHorses").find(":selected").text());

          $('#generate').hide();
          $('#containerHorses').show();
        });
        //-----------------------------------

		$(window).resize();
      });
      //---------------------------------------------------------------------

	  $(window).resize(function() {
        wrapperWidth = $("#wrapper").width();
	  })
    </script>
  </head>
  <body background= #1c87c9 background-size= auto>

    <div>
      <table>
        <tr>
          <td>Start Size(px): </td>
          <td><input class="startWidth" value="500"/></td>
          <td>End Size(px): </td>
          <td><input class="endWidth" value="500"/></td>
          <td>Start Height(%): </td>
          <td><input class="startTop" value="0"/></td>
          <td>End Height(%): </td>
          <td><input class="endTop" value="0"/></td>
          <td>Speed (msec): </td>
          <td><input class="duration" value="5000"/></td>
          <td><select name="target" id="target">
            <option value="Horse">Horse</option>
            <option value="Body">Body</option>
            <option value="Face">Face</option>
            <option value="Dog">Dog</option>
          </select></td>
          <td><div id="containerHorses"></div></td>
          <td><button id="generate">Generate Horses</button></td>
          <td colspan="2"><button id="start">Start</button></td>
          <td><button onclick="document.getElementById('wrapper').requestFullscreen()">Fullscreen</button></td>
        </tr>
      </table>
    </div>
    <div id="wrapper">
      <img class="horse" src="objects-horse/blackHorse.gif" id="imgHorse"/>

      <!-- 
      <video width="320" controls class="horse" Autoplay=autoplay loop >
        <source src="target/mp4/horseWithHumanSlow.mp4" type="video/mp4">
      </video>
      -->
    </div>
  </body>
</html>